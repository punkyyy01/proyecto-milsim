{% load static %}
<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Tablero de Escuadras</title>
  <link rel="stylesheet" href="{% static 'orbat_board.css' %}">
</head>
<body class="board-body">
  <header class="board-header">
    <h1>Panel de Control — ORBAT</h1>
    <p class="muted">Vista de alta densidad: usa atajos y acciones rápidas.</p>
  </header>
  <main class="board-root" id="board">
    <section class="panel">
      <table class="terminal-table" role="grid" aria-describedby="panel-desc">
        <caption id="panel-desc" class="sr-only">Listado compacto de escuadras y acciones rápidas</caption>
        <thead>
          <tr>
            <th class="col-id">ID</th>
            <th class="col-unidad">UNIDAD</th>
            <th class="col-tipo">TIPO</th>
            <th class="col-miembros">MIEMBROS</th>
            <th class="col-acciones">ACCIONES</th>
          </tr>
        </thead>
        <tbody>
          {% for esc in escuadras %}
            <tr data-escuadra-id="{{ esc.id }}">
              <td class="col-id">{{ esc.id }}</td>
              <td class="col-unidad">{{ esc.nombre }}</td>
              <td class="col-tipo">Escuadra</td>
              <td class="col-miembros">
                {% with esc.miembros|length as mcount %}
                  <span class="muted">{{ mcount }} / 5</span>
                {% endwith %}
                <div class="members-inline">
                  {% for m in esc.miembros %}
                    <span class="member">{{ m.nombre_milsim }}</span>{% if not forloop.last %},{% endif %}
                  {% endfor %}
                </div>
              </td>
              <td class="col-acciones">
                <a href="#" class="action add">[+ADD]</a>
                <a href="#" class="action edit">[EDIT]</a>
                <a href="#" class="action view">[VIEW]</a>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </section>
  </main>

  <!-- Modal conflicto -->
  <div id="modal" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modal-panel">
      <h3>Escuadra Llena</h3>
      <p>Selecciona a quién intercambiar:</p>
      <ul id="modal-list" class="modal-list"></ul>
      <div class="modal-actions">
        <button id="modal-cancel" class="btn btn-secondary">Cancelar</button>
      </div>
    </div>
  </div>

  <script src="{% static 'orbat_board.js' %}"></script>
</body>
</html>
